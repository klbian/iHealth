<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.demo.mapper.DrugMapper">
    <select id="showdrug" parameterType="String" resultType="com.example.demo.entity.Drug">
        SELECT * FROM druginfo
    </select>

    <select id="getDrugByType" parameterType="String" resultType="com.example.demo.entity.Drug">
        select * from druginfo where Dtype=#{TypeID}
    </select>

    <select id="getDrugByID" parameterType="String" resultType="com.example.demo.entity.Drug">
        select * from druginfo where DrugID=#{DID}
    </select>

    <insert id="newDrug">
        insert into druginfo(Dname,Dmessage,Dtype) values (#{Dname},#{Dmessage},#{Dtype})
    </insert>

    <delete id="delDrug" parameterType="String">
        delete from druginfo where DrugID=#{DID}
    </delete>

    <update id="editDrug" parameterType="String">
        update druginfo set Dname=#{Dname},Dmessage=#{Dmessage},Dtype=#{Dtype} where DrugID=#{DID}
    </update>


    <insert id="supplyDrug">
        insert into supply(DrugID,SID,Dinventory,Dprice) values (#{DID},#{SID},#{Dinventory},#{Dprice})
    </insert>

    <delete id="delsupDrug" parameterType="String">
        delete from supply where DrugID=#{DID} and SID=#{SID}
    </delete>

    <update id="changeDinDrug">
        update supply set Dinventory=#{Dinventory} where DrugID=#{DID} and SID=#{SID}
    </update>

    <update id="changepriceDrug">
        update supply set Dprice=#{price} where DrugID=#{DID} and SID=#{SID}
    </update>

    <select id="getsupplybyDID" resultType="com.example.demo.entity.Supply">
        select Ssales,supply.SID,Dinventory,Dprice,DrugID,sname from supply,seller where supply.SID=seller.SID and DrugID=#{DID}
    </select>

    <select id="getimg" resultType="com.example.demo.entity.Images">
        select img from images where ImgID=#{imgID}
    </select>

    <select id="getimgID" resultType="com.example.demo.entity.Images">
        select ImgID from images where DrugID=#{DID} order by imgorder
    </select>


    <select id="existDrug" resultType="String">
        select DrugID from druginfo where DrugID=#{DID}
    </select>
</mapper>


